<div id="playlist-section">
  <%= render 'shared/flash_message' %>
  <div class="flex items-center justify-end border-b pb-2">
    <button id="folder-add-button"><i class="fa-solid fa-folder-plus fa-3x"></i></button>
  </div>
  <div id="folder-popup" class="invisible fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center">
    <div class="bg-white px-4 pt-4 rounded shadow-lg relative w-3/5 lg:w-1/3">
      <%= render 'playlists/new' %>
    </div>
  </div>
  <div class="overflow-y-auto max-h-screen">
    <% @playlists.each do |playlist| %>
      <%= link_to playlist_path(playlist) do %>
        <div class="playlist-item flex items-center border-b pb-2 hover:bg-gray-100">
          <i class="fas fa-folder fa-4x mr-2"></i>
          <div class="text-left">
            <%= playlist.title %>
            <p class="text-sm text-gray-500"><%= playlist.videos.count %> 個の動画</p>
          </div>
        </div>
      <% end %>
    <% end %>
  </div>
</div>
<script>
  var watchLink = document.getElementById('watch-link');
  var completeLink = document.getElementById('complete-link');
  var memoLink = document.getElementById('memo-link');
  var playlistLink = document.getElementById('playlist-link');

  var watchSection = document.getElementById('watch-section');
  var completeSection = document.getElementById('complete-section');
  var memoSection = document.getElementById('memo-section');
  var playlistSection = document.getElementById('playlist-section');


  if (watchSection) {
    watchLink.classList.add('underline');
    completeLink.classList.remove('underline');
    memoLink.classList.remove('underline');
    playlistLink.classList.remove('underline');
  } else if (completeSection) {
    completeLink.classList.add('underline');
    watchLink.classList.remove('underline');
    memoLink.classList.remove('underline');
    playlistLink.classList.remove('underline');
  } else if (memoSection) {
    memoLink.classList.add('underline');
    watchLink.classList.remove('underline');
    completeLink.classList.remove('underline');
    playlistLink.classList.remove('underline');
  } else if (playlistSection) {
    playlistLink.classList.add('underline');
    memoLink.classList.remove('underline');
    watchLink.classList.remove('underline');
    completeLink.classList.remove('underline');
  }

  var folderButton = document.querySelector("#folder-add-button");
  var folderPopup = document.querySelector("#folder-popup");
  var closeButton = document.querySelector("#modal-close-button");

  folderButton.addEventListener("click", () => {
    folderPopup.classList.toggle("invisible");
  });

  closeButton.addEventListener("click", () => {
    folderPopup.classList.add("invisible");
  });

</script>

